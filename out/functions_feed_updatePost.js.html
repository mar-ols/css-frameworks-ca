<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: functions/feed/updatePost.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: functions/feed/updatePost.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { getPost } from "../../api/calls/feed/read.js";
import { id } from "../../api/constants.js";
import { updatePost } from "../../api/calls/feed/update.js";
import { userFeedback } from "../userMessages/feed/feedbackTemplate.js";

/**
 * This function sets the values of the update post form and allows the user to edit their post before calling on the updatePost function to send in the updated object to the database.
 */
export async function updatePostForm() {
  try {
    const getValues = await getPost(id);

    const setTitle = (document.querySelector(
      "#updatePostTitle"
    ).value = `${getValues.title}`);

    const setTags = (document.querySelector(
      "#updateTags1"
    ).value = `${getValues.tags}`);

    if (getValues.tags.length > 1) {
      for (let i = 0; i &lt; getValues.tags.length; i++) {
        const setTags = (document.querySelector(
          "#updateTags1"
        ).value = `${getValues.tags[0]}`);
        const setTags2 = (document.querySelector(
          "#updateTags2"
        ).value = `${getValues.tags[1]}`);
        const setTags3 = (document.querySelector(
          "#updateTags3"
        ).value = `${getValues.tags[2]}`);
      }
    }

    const setImg = (document.querySelector(
      "#updatePostImgURL"
    ).value = `${getValues.media}`);

    const setBody = (document.querySelector(
      "#updatePostBody"
    ).value = `${getValues.body}`);

    const getUpdateForm = document.querySelector("#updatePost");

    if (getUpdateForm) {
      getUpdateForm.addEventListener("submit", (event) => {
        event.preventDefault();
        const form = event.target;

        const tags = [];

        const title = form.updateTitle.value;
        const body = form.updateBody.value;
        const media = form.updatePostImgURL.value;
        const tag1 = form.updateTags1.value;
        const tag2 = form.updateTags2.value;
        const tag3 = form.updateTags3.value;

        tags.push(tag1, tag2, tag3);

        const updatedPost = {
          title,
          body,
          media,
          tags,
        };
        updatePost(updatedPost);
        userFeedback(`Post updated`);
      });
    }
  } catch (error) {
    console.error(error);
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#backBtn">backBtn</a></li><li><a href="global.html#changeAvatar">changeAvatar</a></li><li><a href="global.html#confirmDelete">confirmDelete</a></li><li><a href="global.html#createPost">createPost</a></li><li><a href="global.html#displayChangeAvatar">displayChangeAvatar</a></li><li><a href="global.html#displayPost">displayPost</a></li><li><a href="global.html#displayProfile">displayProfile</a></li><li><a href="global.html#displayUserPosts">displayUserPosts</a></li><li><a href="global.html#errorMsg">errorMsg</a></li><li><a href="global.html#filterPosts">filterPosts</a></li><li><a href="global.html#getAvatarData">getAvatarData</a></li><li><a href="global.html#getLoginData">getLoginData</a></li><li><a href="global.html#getNewPostData">getNewPostData</a></li><li><a href="global.html#getPost">getPost</a></li><li><a href="global.html#getPosts">getPosts</a></li><li><a href="global.html#getProfile">getProfile</a></li><li><a href="global.html#getRegisterData">getRegisterData</a></li><li><a href="global.html#getUserPosts">getUserPosts</a></li><li><a href="global.html#loadStorage">loadStorage</a></li><li><a href="global.html#loader">loader</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#loginRegSuccess">loginRegSuccess</a></li><li><a href="global.html#logout">logout</a></li><li><a href="global.html#postCard">postCard</a></li><li><a href="global.html#register">register</a></li><li><a href="global.html#removePost">removePost</a></li><li><a href="global.html#removeStorage">removeStorage</a></li><li><a href="global.html#saveStorage">saveStorage</a></li><li><a href="global.html#searchPosts">searchPosts</a></li><li><a href="global.html#setProfileLink">setProfileLink</a></li><li><a href="global.html#setUserPic">setUserPic</a></li><li><a href="global.html#socialBattery">socialBattery</a></li><li><a href="global.html#updatePost">updatePost</a></li><li><a href="global.html#updatePostForm">updatePostForm</a></li><li><a href="global.html#userFeedback">userFeedback</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Mon Feb 26 2024 17:46:23 GMT+0100 (sentraleuropeisk normaltid)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
